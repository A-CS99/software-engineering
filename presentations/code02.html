<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>实验代码2</title>
    <link rel="stylesheet" href="./style.css">
</head>
<body>
    <nav>
        <div id="info">
            <img id="icon" src="../imgs/抹茶旦旦.jpg" alt="头像">
            <div id="person">
                <span>姓名：贺佳明</span>
                <span>学号：2022211489</span>
            </div>
        </div>
        <div id="nv">
            <a id="la" href="./experiment01.html">实验1</a>
            <a class="pa" href="./experiment02.html">实验2</a>
            <a href="./experiment03.html">实验3</a>
            <a href="./experiment04.html">实验4</a>
            <a id="ra" href="./experiment05.html">实验5</a>
        </div>
    </nav>
    <div id="container">
        <textarea class="code">


            //歌曲
            int Eulogyofjoytune[]=                 //根据简谱列出各频率
            {
            350,350,393,441,
            441,393,350,330,
            294,294,330,350,
            350,330,330,
            350,350,393,441,
            441,393,350,330,
            294,294,330,350,
            330,294,294,
            330,330,350,294,
            330,350,393,350,294,
            330,350,393,350,330,
            294,330,221,-1,
            350,350,393,441,
            441,393,350,393,330,
            294,294,330,350,
            330,294,294
            };
            int lstune[]={
            262,262,393,393,
            441,441,393,
            350,350,330,330,
            294,294,262,
            393,393,350,350,
            330,330,294,
            393,393,350,350,
            330,330,294,
            262,262,393,393,
            441,441,393,
            350,350,330,330,
            294,294,262
            };


            //自己定义一组频率和节拍
            int bdtune[]={
            441,441,495,441,589,556,
            441,441,495,441,661,589,
            441,441,882,700,589,556,495,
            786,786,700,589,661,589,
            };

            int ggtune[]={
            294,393,393,393,393,294,330,371,393,393,
            0,495,393,441,495,624,624,495,495,393,495,624,495,441,441,
            651,624,441,393,624,495,0,624,495,441,495,393,495,0
            };

            //节拍
            float Eulogyofjoybeat[]=                   //根据简谱列出各节拍
            {
            1,1,1,1,
            1,1,1,1,
            1,1,1,1,
            1+0.5,0.5,1+1,
            1,1,1,1,
            1,1,1,1,
            1,1,1,1,
            1+0.5,0.5,1+1,
            1,1,1,1,
            1,0.5,0.5,1,1,
            1,0.5,0.5,1,1,
            1,1,1,1,
            1,1,1,1,
            1,1,1,0.5,0.5,
            1,1,1,1,
            1+0.5,0.5,1+1
            };
            float lsbeat[]={
            1,1,1,1,
            1,1,1+1,
            1,1,1,1,
            1,1,1+1,
            1,1,1,1,
            1,1,1+1,
            1,1,1,1,
            1,1,1+1,
            1,1,1,1,
            1,1,1+1,
            1,1,1,1,
            1,1,1+1
            };

            //自己定义一组频率和节拍
            float bdbeat[]={
            0.5,0.5,1,1,1,1+1,
            0.5,0.5,1,1,1,1+1,
            0.5,0.5,1,1,1,1,1+1,
            0.5,0.5,1,1,1,1+1,
            };

            float ggbeat[]={
            0.5,1.5,0.5,0.75,0.25,0.5,0.25,0.25,1,1,
            0.5,0.5,0.5,0.25,0.25,1,1,0.75,0.25,0.75,0.25,0.75,0.25,1,1+1,
            1,1,1,1,0.5,0.5,0.5,0.5,0.5,0.25,0.25,1,1,1,
            
            };

            //设置接口
            int buzzerpin=5;
            int ledpin=2;

            void setup() {
                pinMode(buzzerpin, OUTPUT);
                pinMode(ledpin, OUTPUT);
                Serial.begin(9600);
            }
            //播放歌曲的函数
            void start(int len,int buzzpin,int lepin,int *tune,float *beat){
                for(int x=0;x<len;x++)
                {
                    tone(buzzpin,tune[x]);
                    digitalWrite(lepin, HIGH); 
                    delay(500*beat[x]);
                    digitalWrite(lepin, LOW);
                    noTone(buzzpin);   
                    delay(100);
                }
            }
            void loop() {
                String select;
                while(Serial.available()>0){
                    select+=char(Serial.read());
                    delay(2);
                }
                if(select!=""){
                    int len;
                    if(select=="Ode to Jo"){
                    Serial.println("Next, we will play the " + select);
                    len=sizeof(Eulogyofjoytune)/sizeof(Eulogyofjoytune[0]);
                    start(len,buzzerpin,ledpin,Eulogyofjoytune,Eulogyofjoybeat);
                    }else if(select=="little star"){
                    Serial.println("Next, we will play the " + select);
                    len=sizeof(lstune)/sizeof(lstune[0]);
                    start(len,buzzerpin,ledpin,lstune,lsbeat);
                    }else if(select=="happy birthday"){
                    Serial.println("Next, we will play the " + select);
                    len=sizeof(lstune)/sizeof(lstune[0]);
                    start(len,buzzerpin,ledpin,bdtune,bdbeat);
                    }else if(select=="guo ge"){
                    Serial.println("Next, we will play the " + select);
                    len=sizeof(lstune)/sizeof(lstune[0]);
                    start(len,buzzerpin,ledpin,ggtune,ggbeat);
                    }else{
                    Serial.println("Sorry, there is no " + select + " in the music library.");
                    }
                }
            }
        </textarea>
        <div class="code_pre">
            <a href="./experiment02.html">查看演示</a>
        </div>
    </div>
</body>
</html>